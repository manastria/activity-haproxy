---
title: "NAT Entrant (DNAT / Redirection de Port)"
description: "Guide pour configurer une r√®gle de NAT entrant (DNAT) sur Stormshield SNS et rendre un service interne accessible depuis l'ext√©rieur."
---

import { Card, Steps, Aside } from '@astrojs/starlight/components';

<Card title="üéØ Objectif">
Rendre un service h√©berg√© sur un serveur interne (ex: un serveur web) accessible depuis l'ext√©rieur via une adresse IP publique. Le pare-feu redirige le trafic entrant vers le bon serveur sur le r√©seau local.
</Card>

## Configuration pas √† pas

<Steps>
1.  **Acc√©der √† la Politique de Filtrage**
    Rendez-vous dans `Configuration > Politique de s√©curit√© > Filtrage et NAT`.

2.  **Ouvrir l'onglet NAT**
    S√©lectionnez l'onglet **`NAT`**.

3.  **Cr√©er une Nouvelle R√®gle Simple**
    Cliquez sur **`+ Nouvelle r√®gle`** et choisissez **`r√®gle simple`**.

4.  **Configurer la R√®gle NAT**
    Double-cliquez sur la nouvelle r√®gle pour l'√©diter.

    -   **Trafic Original (Ce qui arrive sur le pare-feu) :**
        -   **Source originale :** Qui a le droit de se connecter ? Pour un service public, utilisez `Internet`.
        -   **Destination originale :** Quelle est l'adresse publique vis√©e ? Il s'agit le plus souvent de l'interface externe du pare-feu (`Firewall_out`).
        -   **Port destination :** Quel est le port public contact√© ? (ex: `http` pour un serveur web).

    -   **Trafic Apr√®s Translation (O√π le trafic est redirig√©) :**
        -   **Source translat√©e :** Laissez la valeur par d√©faut. La source ne change pas.
        -   **Destination translat√©e :** C'est le serveur interne. S√©lectionnez l'objet machine correspondant (ex: `srv_web_priv`).
        -   **Port destination translat√© :** C'est le port d'√©coute sur le serveur interne. S'il est identique au port public, laissez `none`. Sinon, sp√©cifiez le port de destination interne ici.

5.  **Activer le Tra√ßage**
    Dans l'onglet **`Options`**, mettez le **Niveau de trace** sur **`tracer`**.

6.  **Activer la R√®gle NAT**
    Cliquez sur **`OK`**, puis passez l'√©tat de la r√®gle √† **`on`**. Ne cliquez pas encore sur "Appliquer".

7.  **Cr√©er la R√®gle de Filtrage**

    <Aside type="danger" title="CRUCIAL : N'oubliez pas la R√®gle de Filtrage !">
    Une r√®gle de NAT ne fait que **traduire** les adresses, elle n'**autorise** pas le flux. Vous devez imp√©rativement cr√©er une r√®gle de filtrage pour permettre √† la connexion de passer.
    </Aside>

    -   Allez dans l'onglet **`FILTRAGE`**.
    -   Cr√©ez une nouvelle r√®gle avec l'action **`passer`**.
    -   Configurez cette r√®gle avec les param√®tres du **trafic original** de votre r√®gle NAT :
        -   **Source :** `Internet`
        -   **Destination :** `Firewall_out`
        -   **Port dest. :** `http` (ou le service concern√©)
    -   Passez l'√©tat de cette r√®gle de filtrage √† **`on`**.

8.  **Appliquer la Politique**
    Maintenant que vos deux r√®gles (NAT et Filtrage) sont actives, cliquez sur le bouton **`Appliquer`** pour les rendre effectives.
</Steps>

## ‚úÖ V√©rification

Depuis un poste client externe, tentez d'acc√©der au service en utilisant l'adresse IP publique et le port public configur√©s. La connexion doit √™tre redirig√©e vers votre serveur interne et la page ou le service doit s'afficher.
