---
title: "NAT Sortant (SNAT / Masquerading)"
description: "Guide pour configurer une r√®gle de NAT sortant (SNAT) sur un pare-feu Stormshield SNS afin de permettre l'acc√®s √† Internet."
---

import { Card, Steps, Aside } from '@astrojs/starlight/components';

<Card title="üéØ Objectif">
Permettre aux postes d‚Äôun r√©seau interne d‚Äôacc√©der √† un r√©seau externe (comme Internet) en utilisant l‚Äôadresse IP publique du pare-feu. Le pare-feu ¬´¬†masque¬†¬ª l‚Äôadresse IP source priv√©e et la remplace par sa propre adresse publique.
</Card>

## Configuration pas √† pas

<Steps>
1.  **Acc√©der √† la Politique de Filtrage**
    Rendez-vous dans le menu `Configuration > Politique de s√©curit√© > Filtrage et NAT`.

2.  **Ouvrir l'onglet NAT**
    S√©lectionnez l'onglet **`NAT`** pour acc√©der aux r√®gles de traduction d'adresses.

3.  **Cr√©er une R√®gle de Masquerading**
    Cliquez sur **`+ Nouvelle r√®gle`** et choisissez **`r√®gle de partage d'adresse source (masquerading)`**. L'assistant pr√©configure la r√®gle pour ce cas d'usage pr√©cis.

4.  **Configurer la R√®gle**
    Une nouvelle ligne de r√®gle appara√Æt. Double-cliquez dessus pour ouvrir la fen√™tre de configuration.

    -   **Trafic Original (Avant traduction) :**
        -   **Source originale :** D√©finissez le r√©seau interne autoris√© √† sortir. Utilisez l'objet `Network_internals` pour autoriser tous les r√©seaux internes.
        -   **Destination originale :** Pour un acc√®s √† Internet, utilisez l'objet `Internet`.
        -   **Port destination :** Laissez `Any` pour tous les services.

    -   **Trafic Apr√®s Translation (Apr√®s traduction) :**
        -   **Source translat√©e :** Indiquez l'adresse IP qui sera vue de l'ext√©rieur. S√©lectionnez l'objet de votre interface de sortie, g√©n√©ralement `Firewall_out`.
        -   **Port source translat√© :** L'assistant a automatiquement s√©lectionn√© `ephemeral_fw`. Conservez ce param√®tre.

    <Aside type="tip" title="Astuce s√©curit√©">
    Dans l'onglet `Source translat√©e`, cochez l'option "**choisir al√©atoirement le port source translat√©**" pour rendre le suivi des connexions depuis l'ext√©rieur plus complexe.
    </Aside>

5.  **Activer le Tra√ßage (D√©bogage)**
    Dans la fen√™tre d'√©dition de la r√®gle, allez dans l'onglet **`Options`**.
    Pour le **Niveau de trace**, s√©lectionnez **`tracer`**.

    <Aside type="note">
    Sans cette option, vous ne verrez aucune information sur l'application de cette r√®gle dans les journaux, ce qui rend le diagnostic tr√®s difficile.
    </Aside>

6.  **Activer et Appliquer**
    -   Cliquez sur **`OK`** pour enregistrer la r√®gle.
    -   Activez la r√®gle en cliquant sur son √©tat pour le passer √† **`on`**.
    -   Cliquez sur le bouton **`Appliquer`** en haut de la page pour que la politique soit prise en compte par le pare-feu.
</Steps>

## ‚úÖ V√©rification

Depuis un poste client situ√© dans le r√©seau source, tentez d'acc√©der √† un site Internet. La connexion doit s'√©tablir. Vous pouvez ensuite v√©rifier dans les journaux (`Monitoring > Logs - Journaux d'audit > Trafic r√©seau`) que votre r√®gle de NAT a bien √©t√© appliqu√©e.
