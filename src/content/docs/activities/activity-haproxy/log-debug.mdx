---
title: Diagnostic rapide d‚Äôun service sous Debian
description: Fiche r√©flexe pour comprendre pourquoi un service ne d√©marre pas ou plante sur un serveur Debian.
tags:
  - debian
  - systemd
  - logs
  - administration
  - bts-sio
---

import { Aside } from '@astrojs/starlight/components';

Cette fiche aide √† **comprendre pourquoi un service ne d√©marre pas ou plante**, en exploitant les journaux `systemd`.

---

## V√©rifier l‚Äô√©tat du service

```bash
systemctl status nginx
````

> üîç Affiche l‚Äô√©tat, le PID, le code retour et les derni√®res lignes du journal.
> C‚Äôest la commande la plus rapide pour rep√©rer une erreur.

---

## Consulter les derni√®res lignes du journal

```bash
journalctl -u nginx -n 20
```

> üìÑ Affiche les 20 derni√®res lignes du journal du service.
> Tr√®s utile juste apr√®s un `systemctl restart`.

---

## Suivre les logs en direct

```bash
journalctl -u nginx -f
```

> ü©∫ Affiche les logs en temps r√©el.
> Dans une autre console, relance le service :
>
> ```bash
> sudo systemctl restart nginx
> ```

---

## Aller directement √† la fin du journal

```bash
journalctl -u nginx -e
```

> üîö Permet de sauter directement √† la fin du journal, comme `less +G`.

---

## Logs du dernier d√©marrage

```bash
journalctl -b -u nginx
```

> üïê Affiche les logs depuis le dernier red√©marrage de la machine.
> Pratique pour v√©rifier si le service a bien d√©marr√© au boot.

---

## Filtrer uniquement les erreurs

```bash
journalctl -u nginx -p err -n 20
```

> üî¥ N‚Äôaffiche que les messages de priorit√© *error* (erreurs syst√®me, plantages‚Ä¶).

---

## Cas particuliers : service sans systemd

```bash
tail -n 20 /var/log/nginx/error.log
tail -n 20 /var/log/syslog
```

> üßæ Certains services √©crivent encore dans des fichiers log classiques.

---

## üß† Astuce : cr√©er un alias `debug`

Ajoute dans ton fichier `~/.bashrc` :

```bash
alias debug='sudo journalctl -u'
```

Recharge ensuite ton shell :

```bash
source ~/.bashrc
```

Tu pourras alors taper :

```bash
debug nginx -n 20
debug ssh -f
```

> ‚ö° Id√©al pour les TP : une commande courte et universelle.

---

<Aside type="tip" title="Conseil aux √©tudiants">
Toujours v√©rifier **la derni√®re commande ex√©cut√©e** (`systemctl restart ‚Ä¶`) et **les journaux associ√©s** avec `journalctl`.
Ne pas se fier uniquement √† `status` : les d√©tails du plantage sont souvent quelques lignes plus bas.
</Aside>
```
